# Azure Infrastructure Distrobox Configuration
# NOTE: Use create.sh instead - it automatically detects the repo path.
#       This file is kept for reference only.
#
# This creates a Debian Bookworm-based container with Azure infrastructure tools
# equivalent to the devcontainer configuration.

[azure-infra]
image=docker.io/library/debian:bookworm
pull=true
init=false
nvidia=false
root=false

# Isolated home directory to keep host home clean
home=~/.local/share/distrobox/azure-infra-home

# Base packages needed for tool installation
additional_packages=zsh git curl wget unzip jq gnupg ca-certificates apt-transport-https lsb-release software-properties-common sudo file

# Mount host podman socket for docker CLI compatibility
# Note: Requires `systemctl --user enable --now podman.socket` on host
volume=/run/user/1000/podman/podman.sock:/var/run/docker.sock:rw

# Run setup script on first creation
# NOTE: Update this path if you clone the repo to a different location
init_hooks=bash /var/home/admin/projects/azure-cli-devcontainer-public/distrobox/scripts/setup.sh || echo "Setup script not found - run manually after entering the container"
